## 7.6 推荐的模板参数声明

向我们前几节学过的那样, 我们可以有很多不同的方法来根据模板参数声明参数.

- 声明通过值来传参:

  - 这个方法很简单, 将退化字符串字面量和裸数组, 但是对于大对象无法提供最好的性能, 调用者仍然可以通过使用`std::cref`或者`std::ref`来通过引用传参, 不过调用者应小心行事以保证操作有效.

- 声明通过引用来传参.

  这个方法对于大对象提供了更好的性能, 尤其是下面的情况:

  - 已存在的对象到左值引用.
  - 临时对象(纯右值)或者摇移动的(将亡的)对象的右值引用.
  - 或者两者的通用引用.

  因为上面的情况都不会退化. 所以在传字符串字面量或者裸数组的时候应该特别小心. 对于通用引用,你依然要小心这个方法中的模板参数也可能隐式的被声明为引用类型.



### 一般的推荐

上述选项牢记心中, 对于函数模板, 我们有以下推荐:

1. 默认的话, 声明模板参数传值, 这个方式更加简单, 而且对于字符串字面量也能够很好的工作. 对于小对象或者临时的, 可移动的对象, 其性能是很好的, 而当调用者想传入大对象时可以使用引用包装以减少昂贵的拷贝开销.