# 第七章 传值还是传引用?



从那时起, C++就提供了传值还有传引用两种传参方式. 然而决定用哪种方式一直是个老大难问题. 一般而言, 传引用的话对于非平凡类开销更低, 但是会稍显复杂. C++11又把移动语义参乎到里面了, 意味着我们又有新的传引用的方式了.

1. `X const&` (常左值引用): 形参是传入对象的引用, 但无法修改.
2. `X&` (非常左值引用): 形参是传入对象的引用, 但可以修改.
3. `X&&` (右值引用): 使用移动语义, 将传入对象引用到形参上, 也就是说我们可以修改*偷*来的这个值.

对于已知确定类型确定如何声明参数已经够复杂了, 在模板中, 类型是未知的, 决定那个传参方式就更复杂了. 

但是在1.6.1小节中, 我们确实推荐向函数模板中通过值传参, 不过有一些例外情况:

- 对象不可拷贝
- 参数被用于返回数据
- 参数以及其所有属性需要被模板转发到别的地方
- 性能提升, 大大滴干活

本章将讨论模板中传递参数的几种方式, 并将证明为何应该优先使用按值传递, 也列举了不该使用按值传递的情况. 同时讨论了在处理字符串常量和裸指针时遇到的问题. 

建议看看附录B, 了解一下左值, 右值, 纯右值, 亡值(看看本贾尼老爷子的书上也解释了:

[cppreference](https://zh.cppreference.com/w/cpp/language/value_category)

